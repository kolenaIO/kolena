# Copyright 2021-2023 Kolena Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
from typing import Dict
from typing import List
from typing import Tuple

import pytest

from kolena._experimental.object_detection import GroundTruth
from kolena._experimental.object_detection import Inference
from kolena._experimental.object_detection import ObjectDetectionEvaluator
from kolena._experimental.object_detection import TestCase
from kolena._experimental.object_detection import TestSample
from kolena._experimental.object_detection import ThresholdConfiguration
from kolena._experimental.object_detection import ThresholdStrategy
from kolena._experimental.object_detection.workflow import TestSampleMetrics
from kolena._experimental.object_detection.workflow import TestSampleMetricsSingleClass
from kolena.workflow.annotation import LabeledBoundingBox
from kolena.workflow.annotation import ScoredClassificationLabel
from kolena.workflow.annotation import ScoredLabeledBoundingBox
from tests.integration.helper import fake_locator
from tests.integration.helper import with_test_prefix


TEST_DATA: Dict[str, List[Tuple[TestSample, GroundTruth, Inference]]] = {
    "iou=1 and same labels and max confidence": [
        (
            TestSample(locator=fake_locator(4, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (2, 2), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 1)],
            ),
        ),
    ],
    "iou=0 and diff labels": [
        (
            TestSample(locator=fake_locator(5, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((3, 3), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((1, 1), (2, 2), "b", 1)],
            ),
        ),
    ],
    "iou=0.33 and diff labels but 0 confidence": [
        (
            TestSample(locator=fake_locator(6, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 2), (5, 5), "b", 0)],
            ),
        ),
    ],
    "iou=0.33 and diff labels but 0.5 confidence": [
        (
            TestSample(locator=fake_locator(7, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 2), (5, 5), "b", 0.5)],
            ),
        ),
    ],
    "iou=0.33 and diff labels but 0.99 confidence": [
        (
            TestSample(locator=fake_locator(8, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 2), (5, 5), "b", 0.99)],
            ),
        ),
    ],
    "iou=0.5 and diff labels but 0 confidence": [
        (
            TestSample(locator=fake_locator(9, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 1), (5, 4), "b", 0)],
            ),
        ),
    ],
    "iou=0.5 and diff labels but 0.5 confidence": [
        (
            TestSample(locator=fake_locator(10, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 1), (5, 4), "b", 0.5)],
            ),
        ),
    ],
    "iou=0.5 and diff labels but 0.99 confidence": [
        (
            TestSample(locator=fake_locator(11, "OD")),
            GroundTruth(
                bboxes=[LabeledBoundingBox((1, 1), (4, 4), "a")],
            ),
            Inference(
                bboxes=[ScoredLabeledBoundingBox((2, 1), (5, 4), "b", 0.99)],
            ),
        ),
    ],
    "multiple bboxes in an image, perfect match": [
        (
            TestSample(locator=fake_locator(12, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "c"),
                    LabeledBoundingBox((7, 7), (8, 8), "d"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 1.0),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.9),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "c", 0.8),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "d", 0.7),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, varied iou": [
        (
            TestSample(locator=fake_locator(13, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "a"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "b"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1.1, 1), (2.1, 2), "a", 0.9),
                    ScoredLabeledBoundingBox((3.3, 3), (4.3, 4), "a", 0.8),
                    ScoredLabeledBoundingBox((5.5, 5), (6.5, 6), "a", 0.7),
                    ScoredLabeledBoundingBox((7.7, 7), (8.7, 8), "b", 0.95),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, varied confidence": [
        (
            TestSample(locator=fake_locator(14, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.6),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.5),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.4),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.01),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, many inferences": [
        (
            TestSample(locator=fake_locator(15, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 1),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.95),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.9),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.85),
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 1),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.9),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.88),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, too few inferences": [
        (
            TestSample(locator=fake_locator(16, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.99),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.4),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, suboptimal infs": [
        (
            TestSample(locator=fake_locator(17, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "c"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.001),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "a", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (9, 9), "b", 0.9),
                ],
            ),
        ),
    ],
    "multiple bboxes in an image, ignored matches": [
        (
            TestSample(locator=fake_locator(18, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "c"),
                ],
                ignored_bboxes=[
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.9),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "c", 0.8),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.01),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.99),
                ],
            ),
        ),
    ],
    "multiple bboxes test collection": [
        (
            TestSample(locator=fake_locator(112, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "c"),
                    LabeledBoundingBox((7, 7), (8, 8), "d"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 1.0),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.9),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "c", 0.8),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "d", 0.7),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "a"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "b"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1.1, 1), (2.1, 2), "a", 0.9),
                    ScoredLabeledBoundingBox((3.3, 3), (4.3, 4), "a", 0.8),
                    ScoredLabeledBoundingBox((5.5, 5), (6.5, 6), "a", 0.7),
                    ScoredLabeledBoundingBox((7.7, 7), (8.7, 8), "b", 0.95),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.6),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.5),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.4),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.01),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 1),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.95),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.9),
                    ScoredLabeledBoundingBox((0, 0), (1, 1), "a", 0.85),
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 1),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.9),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.88),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "b"),
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.99),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.4),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "c"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.001),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "a", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (9, 9), "b", 0.9),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "c"),
                ],
                ignored_bboxes=[
                    LabeledBoundingBox((5, 5), (6, 6), "b"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "a", 0.9),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "c", 0.8),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.01),
                    ScoredLabeledBoundingBox((7, 7), (8, 8), "a", 0.99),
                ],
            ),
        ),
    ],
    "large test sample": [
        (
            TestSample(locator=fake_locator(19, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "a"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                    LabeledBoundingBox((11, 11), (12, 12), "b"),
                    LabeledBoundingBox((13, 13), (14, 14), "b"),
                    LabeledBoundingBox((15, 15), (16, 16), "b"),
                    LabeledBoundingBox((17, 17), (18, 18), "b"),
                    LabeledBoundingBox((21, 21), (22, 22), "c"),
                    LabeledBoundingBox((23, 23), (24, 24), "c"),
                    LabeledBoundingBox((25, 25), (26, 26), "c"),
                    LabeledBoundingBox((27, 27), (28, 28), "c"),
                    LabeledBoundingBox((31, 31), (32, 32), "c"),
                    LabeledBoundingBox((33, 33), (34, 34), "c"),
                    LabeledBoundingBox((35, 35), (36, 36), "c"),
                    LabeledBoundingBox((37, 37), (38, 38), "c"),
                    LabeledBoundingBox((41, 41), (42, 42), "c"),
                    LabeledBoundingBox((43, 43), (44, 44), "c"),
                ],
                ignored_bboxes=[
                    LabeledBoundingBox((2, 2), (3, 3), "b"),
                    LabeledBoundingBox((4, 4), (5, 5), "b"),
                    LabeledBoundingBox((6, 6), (7, 7), "b"),
                    LabeledBoundingBox((8, 8), (9, 9), "b"),
                    LabeledBoundingBox((21, 21), (22, 22), "d"),
                    LabeledBoundingBox((23, 23), (24, 24), "d"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (3, 2), "a", 1),
                    ScoredLabeledBoundingBox((3, 3), (5, 4), "a", 0.95),
                    ScoredLabeledBoundingBox((5, 5), (7, 6), "a", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (9, 8), "a", 0.8),
                    ScoredLabeledBoundingBox((11, 11), (13.01, 12), "b", 0.5),
                    ScoredLabeledBoundingBox((13, 13), (15.01, 14), "b", 0.25),
                    ScoredLabeledBoundingBox((15, 15), (17.01, 16), "b", 0.1),
                    ScoredLabeledBoundingBox((17, 17), (19.01, 18), "b", 0.05),
                    ScoredLabeledBoundingBox((21, 21), (22, 22), "c", 0.9),
                    ScoredLabeledBoundingBox((27, 27), (28, 28), "c", 0.6),
                    ScoredLabeledBoundingBox((31, 31), (32, 32), "c", 0.5),
                    ScoredLabeledBoundingBox((33, 33), (34, 34), "c", 0.4),
                    ScoredLabeledBoundingBox((35, 35), (36, 36), "c", 0.3),
                    ScoredLabeledBoundingBox((37, 37), (38, 38), "c", 0.2),
                    ScoredLabeledBoundingBox((41, 41), (42, 42), "c", 0.1),
                    ScoredLabeledBoundingBox((43, 43), (44, 44), "c", 0.01),
                    ScoredLabeledBoundingBox((2, 2), (3, 3), "b", 0.8),
                    ScoredLabeledBoundingBox((4, 4), (5, 5), "e", 0.8),
                ],
            ),
        ),
    ],
    "large test samples": [
        (
            TestSample(locator=fake_locator(20, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "a"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                    LabeledBoundingBox((11, 11), (12, 12), "b"),
                    LabeledBoundingBox((13, 13), (14, 14), "b"),
                    LabeledBoundingBox((15, 15), (16, 16), "b"),
                    LabeledBoundingBox((17, 17), (18, 18), "b"),
                    LabeledBoundingBox((21, 21), (22, 22), "c"),
                    LabeledBoundingBox((23, 23), (24, 24), "c"),
                    LabeledBoundingBox((25, 25), (26, 26), "c"),
                    LabeledBoundingBox((27, 27), (28, 28), "c"),
                    LabeledBoundingBox((31, 31), (32, 32), "c"),
                    LabeledBoundingBox((33, 33), (34, 34), "c"),
                    LabeledBoundingBox((35, 35), (36, 36), "c"),
                    LabeledBoundingBox((37, 37), (38, 38), "c"),
                    LabeledBoundingBox((41, 41), (42, 42), "c"),
                    LabeledBoundingBox((43, 43), (44, 44), "c"),
                ],
                ignored_bboxes=[
                    LabeledBoundingBox((2, 2), (3, 3), "b"),
                    LabeledBoundingBox((4, 4), (5, 5), "b"),
                    LabeledBoundingBox((6, 6), (7, 7), "b"),
                    LabeledBoundingBox((8, 8), (9, 9), "b"),
                    LabeledBoundingBox((21, 21), (22, 22), "d"),
                    LabeledBoundingBox((23, 23), (24, 24), "d"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((1, 1), (3, 2), "a", 1),
                    ScoredLabeledBoundingBox((3, 3), (5, 4), "a", 0.95),
                    ScoredLabeledBoundingBox((5, 5), (7, 6), "a", 0.9),
                    ScoredLabeledBoundingBox((7, 7), (9, 8), "a", 0.8),
                    ScoredLabeledBoundingBox((11, 11), (13.01, 12), "b", 0.5),
                    ScoredLabeledBoundingBox((13, 13), (15.01, 14), "b", 0.25),
                    ScoredLabeledBoundingBox((15, 15), (17.01, 16), "b", 0.1),
                    ScoredLabeledBoundingBox((17, 17), (19.01, 18), "b", 0.05),
                    ScoredLabeledBoundingBox((21, 21), (22, 22), "c", 0.9),
                    ScoredLabeledBoundingBox((27, 27), (28, 28), "c", 0.6),
                    ScoredLabeledBoundingBox((31, 31), (32, 32), "c", 0.5),
                    ScoredLabeledBoundingBox((33, 33), (34, 34), "c", 0.4),
                    ScoredLabeledBoundingBox((35, 35), (36, 36), "c", 0.3),
                    ScoredLabeledBoundingBox((37, 37), (38, 38), "c", 0.2),
                    ScoredLabeledBoundingBox((41, 41), (42, 42), "c", 0.1),
                    ScoredLabeledBoundingBox((43, 43), (44, 44), "c", 0.01),
                    ScoredLabeledBoundingBox((2, 2), (3, 3), "b", 0.8),
                    ScoredLabeledBoundingBox((4, 4), (5, 5), "e", 0.8),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD")),
            GroundTruth(
                bboxes=[
                    LabeledBoundingBox((21, 21), (22, 22), "e"),
                    LabeledBoundingBox((23, 23), (24, 24), "e"),
                    LabeledBoundingBox((25, 25), (26, 26), "e"),
                    LabeledBoundingBox((27, 27), (28, 28), "e"),
                    LabeledBoundingBox((31, 31), (32, 32), "e"),
                    LabeledBoundingBox((33, 33), (34, 34), "e"),
                    LabeledBoundingBox((35, 35), (36, 36), "e"),
                    LabeledBoundingBox((37, 37), (38, 38), "e"),
                    LabeledBoundingBox((41, 41), (42, 42), "e"),
                    LabeledBoundingBox((43, 43), (44, 44), "e"),
                ],
                ignored_bboxes=[
                    LabeledBoundingBox((2, 2), (3, 3), "b"),
                    LabeledBoundingBox((4, 4), (5, 5), "b"),
                    LabeledBoundingBox((6, 6), (7, 7), "b"),
                    LabeledBoundingBox((8, 8), (9, 9), "b"),
                    LabeledBoundingBox((1, 1), (2, 2), "a"),
                    LabeledBoundingBox((3, 3), (4, 4), "a"),
                    LabeledBoundingBox((5, 5), (6, 6), "a"),
                    LabeledBoundingBox((7, 7), (8, 8), "a"),
                ],
            ),
            Inference(
                bboxes=[
                    ScoredLabeledBoundingBox((21, 21), (22, 22), "b", 0.9),
                    ScoredLabeledBoundingBox((23, 23), (24, 24), "e", 0.8),
                    ScoredLabeledBoundingBox((25, 25), (26, 26), "e", 0.7),
                    ScoredLabeledBoundingBox((27, 27), (28, 28), "e", 0.6),
                    ScoredLabeledBoundingBox((31, 31), (32, 32), "e", 0.1),
                    ScoredLabeledBoundingBox((33, 33), (34, 34), "e", 0),
                    ScoredLabeledBoundingBox((6, 6), (7, 7), "b", 0.9),
                    ScoredLabeledBoundingBox((8, 8), (9, 9), "b", 0.8),
                    ScoredLabeledBoundingBox((1, 1), (2, 2), "b", 0.7),
                    ScoredLabeledBoundingBox((3, 3), (4, 4), "b", 0.6),
                    ScoredLabeledBoundingBox((5, 5), (6, 6), "b", 0.01),
                ],
            ),
        ),
    ],
}


TEST_CONFIGURATIONS: Dict[str, ThresholdConfiguration] = {
    "Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_03,
        iou_threshold=0.3,
        min_confidence_score=0.0,
        with_class_level_metrics=False,
    ),
    "Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_05,
        iou_threshold=0.5,
        min_confidence_score=0.0,
        with_class_level_metrics=False,
    ),
    "Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_05,
        iou_threshold=0.5,
        min_confidence_score=0.3,
        with_class_level_metrics=False,
    ),
    "Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.F1_OPTIMAL,
        iou_threshold=0.5,
        min_confidence_score=0.1,
        with_class_level_metrics=False,
    ),
    "Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_03,
        iou_threshold=0.3,
        min_confidence_score=0.0,
        with_class_level_metrics=True,
    ),
    "Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_05,
        iou_threshold=0.5,
        min_confidence_score=0.0,
        with_class_level_metrics=True,
    ),
    "Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.FIXED_05,
        iou_threshold=0.5,
        min_confidence_score=0.3,
        with_class_level_metrics=True,
    ),
    "Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1": ThresholdConfiguration(
        threshold_strategy=ThresholdStrategy.F1_OPTIMAL,
        iou_threshold=0.5,
        min_confidence_score=0.1,
        with_class_level_metrics=True,
    ),
}


TEST_PARAMS = [(config, name) for name in TEST_DATA.keys() for config in TEST_CONFIGURATIONS.keys()]

TEST_CASE = TestCase(with_test_prefix("multiclass OD test case"))

# evaluator_configuration, test_name -> test_sample_metrics
EXPECTED_COMPUTE_TEST_SAMPLE_METRICS: Dict[Tuple[str, str], List[Tuple[TestSample, TestSampleMetricsSingleClass]]] = {
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=[ScoredClassificationLabel(label="a", score=0.3)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=1 and same labels and max confidence"): [
        (
            TestSample(locator=fake_locator(4, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0 and diff labels"): [
        (
            TestSample(locator=fake_locator(5, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(6, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.5)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.5)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.5)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(7, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.99)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.99)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(2.0, 2.0), bottom_right=(5.0, 5.0), label="b", score=0.99)],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=1,
                count_FN=1,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.33 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(8, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0 confidence"): [
        (
            TestSample(locator=fake_locator(9, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.5)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.5)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.5)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0.5 confidence"): [
        (
            TestSample(locator=fake_locator(10, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.99)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.99)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(2.0, 1.0), bottom_right=(5.0, 4.0), label="b", score=0.99)],
                FP=[],
                FN=[],
                count_TP=1,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "iou=0.5 and diff labels but 0.99 confidence"): [
        (
            TestSample(locator=fake_locator(11, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(4.0, 4.0), label="a")],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[ScoredClassificationLabel(label="a", score=1.0)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                    ScoredClassificationLabel(label="d", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="d", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="d", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, perfect match"): [
        (
            TestSample(locator=fake_locator(12, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                    ScoredClassificationLabel(label="c", score=0.1),
                    ScoredClassificationLabel(label="d", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b")],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b")],
                Confused=[],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, varied iou"): [
        (
            TestSample(locator=fake_locator(13, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=1,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.95,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                count_TP=3,
                count_FP=0,
                count_FN=1,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.4,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                Confused=[],
                count_TP=3,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.4,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, varied confidence"): [
        (
            TestSample(locator=fake_locator(14, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.4,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, many inferences"): [
        (
            TestSample(locator=fake_locator(15, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                Confused=[],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.9,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.4,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.4,
                thresholds=[ScoredClassificationLabel(label="a", score=0.3)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, too few inferences"): [
        (
            TestSample(locator=fake_locator(16, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.3)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, suboptimal infs"): [
        (
            TestSample(locator=fake_locator(17, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=2,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes in an image, ignored matches"): [
        (
            TestSample(locator=fake_locator(18, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8)],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a")],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.8,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b")],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                count_TP=3,
                count_FP=0,
                count_FN=1,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.4,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.4,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0)],
                FP=[ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0)],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=2,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                    ScoredClassificationLabel(label="d", score=0.3),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b")],
                Confused=[],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                Confused=[],
                count_TP=3,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.4,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.4,
                thresholds=[ScoredClassificationLabel(label="a", score=0.3)],
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.3)],
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="d", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="d", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.1, 1.0), bottom_right=(2.1, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.3, 3.0), bottom_right=(4.3, 4.0), label="a", score=0.8),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(5.5, 5.0), bottom_right=(6.5, 6.0), label="a", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=2,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.6,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a", score=0.88),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=0.85),
                ],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=4,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.85,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.99)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.99,
                min_confidence_above_t=0.99,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a", score=0.9)],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                ],
                Confused=[],
                count_TP=1,
                count_FP=1,
                count_FN=3,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[ScoredClassificationLabel(label="a", score=0.5)],
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "multiple bboxes test collection"): [
        (
            TestSample(locator=fake_locator(112, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="c", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="d", score=0.7),
                ],
                FP=[],
                FN=[],
                Confused=[],
                count_TP=4,
                count_FP=0,
                count_FN=0,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=False,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.7,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                    ScoredClassificationLabel(label="c", score=0.1),
                    ScoredClassificationLabel(label="d", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(113, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(7.7, 7.0), bottom_right=(8.7, 8.0), label="b", score=0.95)],
                FN=[
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=1,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.95,
                min_confidence_above_t=0.95,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(114, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.4),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                ],
                Confused=[],
                count_TP=2,
                count_FP=0,
                count_FN=2,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.5,
                min_confidence_above_t=0.4,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(115, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b", score=0.9),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(0.0, 0.0), bottom_right=(1.0, 1.0), label="a", score=1.0)],
                FN=[LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a")],
                Confused=[],
                count_TP=3,
                count_FP=1,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.9,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(116, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="b"),
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=0,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(117, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[],
                FP=[ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 9.0), label="b", score=0.9)],
                FN=[
                    LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                ],
                Confused=[],
                count_TP=0,
                count_FP=1,
                count_FN=4,
                count_Confused=0,
                has_TP=False,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.9,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(118, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="c", score=0.8)],
                FP=[],
                FN=[LabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="a")],
                Confused=[],
                count_TP=1,
                count_FP=0,
                count_FN=1,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=0.8,
                min_confidence_above_t=0.8,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                count_TP=10,
                count_FP=0,
                count_FN=8,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.3,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                ],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=17,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                Confused=[],
                count_TP=10,
                count_FP=0,
                count_FN=8,
                count_Confused=0,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.3,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                Confused=[],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                ],
                Confused=[],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "large test sample"): [
        (
            TestSample(locator=fake_locator(19, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                    ScoredLabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c", score=0.2),
                    ScoredLabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c", score=0.1),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(15.01, 14.0), label="b", score=0.25),
                    ScoredLabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(17.01, 16.0), label="b", score=0.1),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=8,
                count_FP=3,
                count_FN=10,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.1,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
    ],
    ("Threshold: Fixed(0.3), IoU: 0.3, confidence ≥ 0.0", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                count_TP=10,
                count_FP=0,
                count_FN=8,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.3,
                thresholds=0.3,
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                ],
                count_TP=4,
                count_FP=0,
                count_FN=6,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=0.3,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.0", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                ],
                count_TP=4,
                count_FP=0,
                count_FN=6,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: Fixed(0.5), IoU: 0.5, confidence ≥ 0.3", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5)],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                ],
                count_TP=7,
                count_FP=1,
                count_FN=11,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=0.5,
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                ],
                count_TP=4,
                count_FP=0,
                count_FN=6,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=0.5,
            ),
        ),
    ],
    ("Threshold: F1-Optimal, IoU: 0.5, confidence ≥ 0.1", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0)],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                    LabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                ],
                count_TP=1,
                count_FP=0,
                count_FN=17,
                has_TP=True,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=1.0,
                min_confidence_above_t=1.0,
                thresholds=1.0,
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetricsSingleClass(
                TP=[],
                FP=[],
                FN=[
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="e"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e"),
                    LabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                ],
                count_TP=0,
                count_FP=0,
                count_FN=10,
                has_TP=False,
                has_FP=False,
                has_FN=True,
                max_confidence_above_t=None,
                min_confidence_above_t=None,
                thresholds=1.0,
            ),
        ),
    ],
    ("Threshold: Fixed(0.3) by class, IoU: 0.3, confidence ≥ 0.0", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                ],
                FP=[ScoredLabeledBoundingBox(top_left=(4.0, 4.0), bottom_right=(5.0, 5.0), label="e", score=0.8)],
                FN=[
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                Confused=[],
                count_TP=10,
                count_FP=1,
                count_FN=8,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.3,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.3),
                    ScoredClassificationLabel(label="b", score=0.3),
                    ScoredClassificationLabel(label="c", score=0.3),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.6),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                ],
                Confused=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                ],
                count_TP=3,
                count_FP=3,
                count_FN=7,
                count_Confused=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=[ScoredClassificationLabel(label="e", score=0.3)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.0", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(4.0, 4.0), bottom_right=(5.0, 5.0), label="e", score=0.8),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                ],
                Confused=[],
                count_TP=7,
                count_FP=2,
                count_FN=11,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.6),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                ],
                Confused=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                ],
                count_TP=3,
                count_FP=3,
                count_FN=7,
                count_Confused=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=[ScoredClassificationLabel(label="e", score=0.5)],
            ),
        ),
    ],
    ("Threshold: Fixed(0.5) by class, IoU: 0.5, confidence ≥ 0.3", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(5.0, 4.0), label="a", score=0.95),
                    ScoredLabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(7.0, 6.0), label="a", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(9.0, 8.0), label="a", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(4.0, 4.0), bottom_right=(5.0, 5.0), label="e", score=0.8),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c"),
                ],
                Confused=[],
                count_TP=7,
                count_FP=2,
                count_FN=11,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.5,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=0.5),
                    ScoredClassificationLabel(label="c", score=0.5),
                    ScoredClassificationLabel(label="b", score=0.5),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.6),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="e"),
                    LabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                ],
                Confused=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                ],
                count_TP=3,
                count_FP=3,
                count_FN=7,
                count_Confused=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.6,
                thresholds=[ScoredClassificationLabel(label="e", score=0.5)],
            ),
        ),
    ],
    ("Threshold: F1-Optimal by class, IoU: 0.5, confidence ≥ 0.1", "large test samples"): [
        (
            TestSample(locator=fake_locator(20, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(3.0, 2.0), label="a", score=1.0),
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="c", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="c", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="c", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="c", score=0.4),
                    ScoredLabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="c", score=0.3),
                    ScoredLabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="c", score=0.2),
                    ScoredLabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="c", score=0.1),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(13.01, 12.0), label="b", score=0.5),
                    ScoredLabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(15.01, 14.0), label="b", score=0.25),
                    ScoredLabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(17.01, 16.0), label="b", score=0.1),
                    ScoredLabeledBoundingBox(top_left=(4.0, 4.0), bottom_right=(5.0, 5.0), label="e", score=0.8),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(11.0, 11.0), bottom_right=(12.0, 12.0), label="b"),
                    LabeledBoundingBox(top_left=(13.0, 13.0), bottom_right=(14.0, 14.0), label="b"),
                    LabeledBoundingBox(top_left=(15.0, 15.0), bottom_right=(16.0, 16.0), label="b"),
                    LabeledBoundingBox(top_left=(17.0, 17.0), bottom_right=(18.0, 18.0), label="b"),
                    LabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="c"),
                    LabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="c"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="c"),
                    LabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="a"),
                    LabeledBoundingBox(top_left=(5.0, 5.0), bottom_right=(6.0, 6.0), label="a"),
                    LabeledBoundingBox(top_left=(7.0, 7.0), bottom_right=(8.0, 8.0), label="a"),
                ],
                Confused=[],
                count_TP=8,
                count_FP=4,
                count_FN=10,
                count_Confused=0,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=False,
                max_confidence_above_t=1.0,
                min_confidence_above_t=0.1,
                thresholds=[
                    ScoredClassificationLabel(label="a", score=1.0),
                    ScoredClassificationLabel(label="b", score=0.1),
                    ScoredClassificationLabel(label="c", score=0.1),
                ],
            ),
        ),
        (
            TestSample(locator=fake_locator(21, "OD"), metadata={}),
            TestSampleMetrics(
                TP=[
                    ScoredLabeledBoundingBox(top_left=(23.0, 23.0), bottom_right=(24.0, 24.0), label="e", score=0.8),
                    ScoredLabeledBoundingBox(top_left=(25.0, 25.0), bottom_right=(26.0, 26.0), label="e", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(27.0, 27.0), bottom_right=(28.0, 28.0), label="e", score=0.6),
                    ScoredLabeledBoundingBox(top_left=(31.0, 31.0), bottom_right=(32.0, 32.0), label="e", score=0.1),
                ],
                FP=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                    ScoredLabeledBoundingBox(top_left=(1.0, 1.0), bottom_right=(2.0, 2.0), label="b", score=0.7),
                    ScoredLabeledBoundingBox(top_left=(3.0, 3.0), bottom_right=(4.0, 4.0), label="b", score=0.6),
                ],
                FN=[
                    LabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="e"),
                    LabeledBoundingBox(top_left=(33.0, 33.0), bottom_right=(34.0, 34.0), label="e"),
                    LabeledBoundingBox(top_left=(35.0, 35.0), bottom_right=(36.0, 36.0), label="e"),
                    LabeledBoundingBox(top_left=(37.0, 37.0), bottom_right=(38.0, 38.0), label="e"),
                    LabeledBoundingBox(top_left=(41.0, 41.0), bottom_right=(42.0, 42.0), label="e"),
                    LabeledBoundingBox(top_left=(43.0, 43.0), bottom_right=(44.0, 44.0), label="e"),
                ],
                Confused=[
                    ScoredLabeledBoundingBox(top_left=(21.0, 21.0), bottom_right=(22.0, 22.0), label="b", score=0.9),
                ],
                count_TP=4,
                count_FP=3,
                count_FN=6,
                count_Confused=1,
                has_TP=True,
                has_FP=True,
                has_FN=True,
                has_Confused=True,
                max_confidence_above_t=0.9,
                min_confidence_above_t=0.1,
                thresholds=[ScoredClassificationLabel(label="e", score=0.1)],
            ),
        ),
    ],
}


@pytest.mark.parametrize(
    "config_name, test_name",
    TEST_PARAMS,
)
def test__prebuilt__object__detection__multiclass__compute__test__sample__metrics(
    config_name: str,
    test_name: str,
) -> None:
    config = TEST_CONFIGURATIONS[config_name]
    eval = ObjectDetectionEvaluator(configurations=[config])
    result = eval.compute_test_sample_metrics(
        test_case=TEST_CASE,
        inferences=TEST_DATA[test_name],
        configuration=config,
    )

    assert EXPECTED_COMPUTE_TEST_SAMPLE_METRICS[config_name, test_name] == result


def test__prebuilt__object__detection__multiclass__compute__test__sample__metrics__all() -> None:
    for config_name, config in TEST_CONFIGURATIONS.items():
        eval = ObjectDetectionEvaluator(configurations=[config])
        result = eval.compute_test_sample_metrics(
            test_case=TEST_CASE,
            inferences=[ts_gt_inf for _, data in TEST_DATA.items() for ts_gt_inf in data],
            configuration=config,
        )

        assert [pair for _, results in EXPECTED_COMPUTE_TEST_SAMPLE_METRICS.items() for pair in results] == result
